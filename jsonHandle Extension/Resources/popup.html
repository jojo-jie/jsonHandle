<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="color-scheme" content="light dark">
    <title>JSON Handler</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="popup-shell">
        <header class="hero">
            <div class="hero-logo" aria-hidden="true">{ }</div>
            <div>
                <h1>JSON Handler</h1>
                <p>页面 JSON 诊断与格式化控制台</p>
            </div>
        </header>

        <main class="content">
            <section class="panel status-panel">
                <div class="panel-title">扩展状态</div>
                <div class="status-main">
                    <span class="status-dot"></span>
                    <div>
                        <div class="status-label">当前连接</div>
                        <div class="status-value" id="extensionStatus">检测中...</div>
                    </div>
                </div>
                <div class="status-host" id="activeHost">-</div>
                <div class="button-row compact">
                    <button id="checkNowBtn" class="btn btn-primary" type="button">重新检测 JSON</button>
                    <button id="refreshBtn" class="btn btn-ghost" type="button">刷新状态</button>
                </div>
            </section>

            <section class="panel settings-panel">
                <div class="panel-title">渲染设置</div>
                <label class="setting-row">
                    <span>主题</span>
                    <select id="settingTheme">
                        <option value="auto">Auto</option>
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                </label>
                <label class="setting-row">
                    <span>折叠阈值</span>
                    <input type="number" id="settingCollapse" min="0" max="10000" step="1">
                </label>
                <label class="setting-row">
                    <span>最大 JSON 大小 (MB)</span>
                    <input type="number" id="settingMaxSize" min="1" max="100" step="1">
                </label>
                <label class="setting-row setting-toggle">
                    <span>显示统计信息</span>
                    <input type="checkbox" id="settingShowStats">
                </label>
                <div class="button-row">
                    <button id="applySettingsBtn" class="btn btn-primary" type="button">应用到当前页面</button>
                    <button id="resetSettingsBtn" class="btn btn-ghost" type="button">恢复默认</button>
                </div>
            </section>

            <section class="panel debug-panel">
                <div class="panel-title">连接诊断</div>
                <div class="debug-item">
                    <span class="debug-label">URL</span>
                    <span class="debug-value" id="debugUrl">加载中...</span>
                </div>
                <div class="debug-item">
                    <span class="debug-label">Extension</span>
                    <span class="debug-value" id="debugExtension">Checking...</span>
                </div>
                <div class="debug-item">
                    <span class="debug-label">Page Access</span>
                    <span class="debug-value" id="debugAccess">Checking...</span>
                </div>
                <div class="button-row compact">
                    <button id="copyUrlBtn" class="btn btn-ghost" type="button">复制当前 URL</button>
                </div>
            </section>

            <div id="feedbackBar" class="feedback" aria-live="polite"></div>
        </main>

        <footer class="footer">
            <span class="version">v1.0.0</span>
            <span class="hint">受限页面无法注入内容脚本</span>
        </footer>
    </div>

    <script src="shared/settings.js"></script>
    <script src="popup.js"></script>
</body>
</html>
